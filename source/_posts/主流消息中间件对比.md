---
title: 主流消息中间件对比
date: 2020-07-26 11:27:37
tags:
- 消息中间件
categories:
- 消息中间件
description: 主流的消息中间件对比
cover: https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2310411191,273799888&fm=26&gp=0.jpg
---



# 什么是消息中间件

消息中间件适用于需要可靠的数据传送的分布式环境。采用消息中间件机制的系统中，不同的对象之间通过传递消息来激活对方的事件，完成相应的操作。

发送者将消息发送给消息服务器，消息服务器将消息存放在若干队列中，在合适的时候再将消息转发给接收者。消息中间件能在不同平台之间通信，它常被用来屏蔽掉各种平台及协议之间的特性，实现应用程序之间的协同，其优点在于能够在客户和服务器之间提供同步和异步的连接，并且在任何时刻都可以将消息进行传送或者存储转发，这也是它比远程过程调用RPC更进一步的原因。


<br>



# 为什么使用消息中间件

- `业务解耦，代码解耦`：例如，订单业务需要发送短信、推送app通知信息、扣除会员积分、发送email等，如果把这些全部写在订单业务代码中，订单代码将会变得十分臃肿，不利于修改维护，事物管理十分麻烦，使用中间件就不会有上述问题。
- `同步变异步，加快业务响应时间`：相对于RPC来说，异步通信使得生产者和消费者得以充分执行自己的逻辑而无需等待。
- `流量消峰`：消息存储堆积也是消息中间件的核心，可堆积大量的消息，当上游系统的吞吐能力远高于下游系统，在流量洪峰时可能会冲垮下游系统，消息中间件可以在峰值时堆积消息，而在峰值过去后下游系统慢慢消费消息解决流量洪峰的问题，典型的场景就是秒杀系统的设计。
- `消息的顺序性`：消息中间件采用的是队列技术，消息队列可以保证消息的先进先出，能保证消息顺序执行。
- `消息的可靠性`：消息中间件有消费确认机制（ACK），在收到成功被消费的确认消息之后才会把消息从队列中删除，并且消息中间件有本地刷盘存储功能。
- 解决分布式事物复杂性。



<br>



# 主流的消息中间件



## ActiveMQ

ActiveMQ是Apache出品的开源消息中间件，它完整支持JMS（java message service）规范。其具有丰富的API，拥有多种集群构建模式，是早起比较主流的消息中间件。



>  性能相比于其他MQ较低，面对大规模并发时会出现消息过多堆积等问题



## KAFKA

Kafka是apache的顶级项目，其基于pull模式来处理消息消费，追求高吞吐量，不支持事物，对消息的重复、丢失、错误没有严格的要求，适合于大量数据的收集业务，如日志收集。



>  其高吞吐量主要基于服务器的pagecache，其可以达到几乎内存的读写速度，可以在廉价的服务器上达到10w/s的吞吐量。



## RocketMQ

RocketMQ是阿里开源的，目前是apache的顶级项目，使用java开发，具有高吞吐量、高性能，适合于大规模分布式系统。其基于kafka，并对消息的可靠传输和事物进行了优化。



## RabbitMQ

使用Erlang开发的消息队列系统，基于AMQP协议实现。有很好的数据一致性、稳定性、可靠性，对性能和吞吐量。



其性能相对于kafka会低一些。



> AMQP协议主要特征是面向消息、队列、路由、可靠性和安全